# キャンペーン設定機能要件定義

## 概要
新規キャンペーン作成とキャンペーン基本設定を行うページ。ゲームマスターがTRPGキャンペーンの基盤を構築するための中核機能。

## 基本機能

### 1. キャンペーン基本情報設定
- **キャンペーン名**: 分かりやすいタイトル設定
- **ゲームシステム選択**: 
  - D&D 5e
  - Pathfinder
  - Call of Cthulhu
  - カスタムシステム
- **キャンペーン概要**: 短い説明文
- **想定プレイ期間**: セッション数や期間の見積もり

### 2. プレイヤー構成設定
- **プレイヤー人数**: 推奨人数とその理由
- **経験レベル**: 初心者・中級者・上級者
- **プレイスタイル**: 
  - ロールプレイ重視
  - 戦術重視
  - 探索重視
  - 物語重視

### 3. 世界設定の基盤
- **世界観テーマ**: ファンタジー、SF、現代、歴史等
- **世界の規模**: 村落・都市・国家・大陸・世界
- **技術レベル**: 石器時代〜未来技術
- **魔法/超自然要素**: 有無と強度設定

### 4. キャンペーン目標設定
- **メインクエスト**: 最終目標の設定
- **サブクエスト**: 中間目標やサイドストーリー
- **成長目標**: キャラクター成長の方向性
- **達成指標**: 進行度の測定方法

## 段階的設定ウィザード

### Step 1: 基本情報
```
- キャンペーン名入力
- ゲームシステム選択
- 基本テーマ選択
```

### Step 2: プレイヤー設定
```
- 人数設定
- 経験レベル選択
- プレイスタイル選択
```

### Step 3: 世界設定
```
- 世界観設定
- 技術レベル
- 魔法レベル
```

### Step 4: 目標設定
```
- メインストーリー概要
- キャンペーン期間
- 達成目標
```

### Step 5: 確認・作成
```
- 設定内容の確認
- AI による設定評価
- キャンペーン作成実行
```

## AI統合機能

### 1. 設定アシスタント
- **テーマ提案**: 入力内容に基づく世界観提案
- **バランスチェック**: 設定の整合性確認
- **難易度調整**: プレイヤー構成に応じた調整提案

### 2. 自動生成支援
- **世界設定生成**: 基本設定から詳細世界の展開
- **NPC候補生成**: 重要NPCの初期案作成
- **イベントシード**: 潜在的イベントの提案

### 3. バランス評価
- **構成分析**: 設定要素間の調和性評価
- **実現可能性**: 設定の実用性チェック
- **改善提案**: より良い設定への助言

## データ構造

### TRPGCampaign基本情報
```typescript
interface CampaignBasicInfo {
  name: string;
  gameSystem: GameSystem;
  description: string;
  estimatedSessions: number;
  playerCount: number;
  experienceLevel: ExperienceLevel;
  playStyle: PlayStyle[];
}
```

### 世界設定情報
```typescript
interface WorldSettings {
  theme: WorldTheme;
  scale: WorldScale;
  techLevel: TechLevel;
  magicLevel: MagicLevel;
  customSettings: CustomSetting[];
}
```

### キャンペーン目標
```typescript
interface CampaignGoals {
  mainQuest: string;
  subQuests: string[];
  growthGoals: string[];
  successMetrics: string[];
}
```

## バリデーション要件

### 1. 必須項目チェック
- **基本情報**: 名前、システム、概要
- **プレイヤー設定**: 人数、経験レベル
- **世界設定**: 最低限のテーマ設定

### 2. 整合性チェック
- **システム整合性**: ゲームシステムと世界設定の適合性
- **バランス確認**: プレイヤー構成と難易度の調和
- **実現可能性**: 設定の実装可能性

### 3. 推奨事項提示
- **不足要素**: 追加設定が推奨される項目
- **潜在的問題**: 将来的な問題の可能性
- **改善案**: より良い設定への提案

## UI/UX要件

### 1. ステップバイステップUI
- **進行表示**: 現在のステップと全体進行度
- **戻る/進む**: 自由な画面間移動
- **一時保存**: 途中状態の保存機能

### 2. 入力支援
- **オートコンプリート**: 一般的な設定の提案
- **テンプレート**: 事前定義済み設定パターン
- **ヘルプシステム**: 各項目の説明とガイダンス

### 3. 視覚的フィードバック
- **リアルタイムプレビュー**: 設定内容の即座反映
- **エラー表示**: 不正な入力の即座指摘
- **成功表示**: 完了した設定項目の明確化

## エラーハンドリング

### 1. 入力エラー
- **フォームバリデーション**: リアルタイム入力チェック
- **エラーメッセージ**: 具体的で分かりやすい説明
- **修正ガイド**: エラー解決のための手順提示

### 2. システムエラー
- **保存失敗**: データ保存エラーの適切な処理
- **AI通信エラー**: AI機能利用不可時の代替手段
- **復旧機能**: 一時保存からの復旧オプション

## テスト要件

### 1. 機能テスト
- **ウィザード進行**: 全ステップの正常な遷移
- **データ保存**: 設定内容の正確な保存
- **AI統合**: AI機能の適切な動作

### 2. ユーザビリティテスト
- **新規ユーザー**: 初回利用時の分かりやすさ
- **効率性**: 経験ユーザーの作業効率
- **エラー回復**: エラー発生時の対処しやすさ

### 3. パフォーマンステスト
- **読み込み速度**: ページ表示の応答性
- **AI応答時間**: AI機能の反応速度
- **大量データ**: 複雑な設定での安定性